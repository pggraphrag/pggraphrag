# ═══════════════════════════════════════════════════════════════════════
# pggraphrag Environment Configuration
# ═══════════════════════════════════════════════════════════════════════
# Copy this file to .env and customize for your environment.
# WARNING: Never commit .env with actual credentials to version control.

# ═══════════════════════════════════════════════════════════════════════
# PostgreSQL Configuration (REQUIRED)
# ═══════════════════════════════════════════════════════════════════════

# Default database created on container startup
POSTGRES_DB=postgres

# Default superuser created on container startup
POSTGRES_USER=postgres

# ⚠️  REQUIRED: Superuser password (change this in production!)
# Use a strong, randomly generated password in production
POSTGRES_PASSWORD=changeme

# Additional arguments passed to initdb
POSTGRES_INITDB_ARGS=--encoding=UTF8 --locale=C

# Host-based authentication method (scram-sha-256 is recommended)
POSTGRES_HOST_AUTH_METHOD=scram-sha-256

# ═══════════════════════════════════════════════════════════════════════
# Network Configuration (OPTIONAL)
# ═══════════════════════════════════════════════════════════════════════

# Port mapping (host:container) - default PostgreSQL port
POSTGRES_PORT=5432

# Network subnet for the Docker network
NETWORK_SUBNET=172.20.0.0/16

# ═══════════════════════════════════════════════════════════════════════
# Resource Limits (OPTIONAL)
# ═══════════════════════════════════════════════════════════════════════

# CPU limit (number of cores) - adjust based on your needs
CPU_LIMIT=2.0

# CPU reservation (minimum guaranteed cores)
CPU_RESERVATION=0.5

# Memory limit - adjust based on your workload
# Format: <number><unit> where unit is b, k, m, or g
MEMORY_LIMIT=2G

# Memory reservation (minimum guaranteed memory)
MEMORY_RESERVATION=512M

# ═══════════════════════════════════════════════════════════════════════
# Storage Configuration (OPTIONAL)
# ═══════════════════════════════════════════════════════════════════════

# Path for PostgreSQL data persistence (mounted volume)
DATA_PATH=./data

# Path for backup storage (mounted volume)
BACKUP_MOUNT_PATH=./backups

# ═══════════════════════════════════════════════════════════════════════
# Logging Configuration (OPTIONAL)
# ═══════════════════════════════════════════════════════════════════════

# Logging driver (json-file, syslog, journald, gelf, fluentd, etc.)
LOGGING_DRIVER=json-file

# Maximum size of a single log file before rotation
LOGGING_MAX_SIZE=10m

# Maximum number of log files to retain
LOGGING_MAX_FILE=3

# ═══════════════════════════════════════════════════════════════════════
# Development/Debug Options (OPTIONAL - use with dev profile)
# ═══════════════════════════════════════════════════════════════════════

# Log all statements (useful for debugging, NOT recommended in production)
# Options: none, ddl, mod, all
POSTGRES_LOG_STATEMENT=all

# Log duration of each completed statement
POSTGRES_LOG_DURATION=on

# ═══════════════════════════════════════════════════════════════════════
# Security Best Practices
# ═══════════════════════════════════════════════════════════════════════
#
# 1. Always use strong, unique passwords in production
#    Generate with: openssl rand -base64 32
#
# 2. Never commit .env files to version control
#    Add to .gitignore: echo '.env' >> .gitignore
#
# 3. Use TLS/SSL for connections in production
#    Configure certificates and use host networking or proper reverse proxy
#
# 4. Restrict network access with firewalls
#    Only allow connections from trusted IPs/subnets
#
# 5. Regular backup strategy
#    Set up automated backups to BACKUP_MOUNT_PATH
#
# 6. Monitor resource usage
#    Adjust CPU/Memory limits based on actual usage patterns
#
# ═══════════════════════════════════════════════════════════════════════
